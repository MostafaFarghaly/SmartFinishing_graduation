{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/front_end/projects/next_js/smart-finshing/app/add-portfolio-images/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { useLoginClient } from \"../../context/regester/login_context\";\r\nimport { useApi } from \"../../context/ApiContext\";\r\n\r\nexport default function AddPortfolioImages() {\r\n  const { token, saveData } = useLoginClient();\r\n  const { baseUrl } = useApi();\r\n  const { id } = useParams();\r\n  const router = useRouter();\r\n\r\n  const [files, setFiles] = useState<FileList | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [successMessage, setSuccessMessage] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    setSuccessMessage(\"\");\r\n    setErrorMessage(\"\");\r\n\r\n    if (!files || files.length === 0) {\r\n      setErrorMessage(\"Please select at least one image.\");\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    Array.from(files).forEach((file) => {\r\n      formData.append(\"ImageFiles\", file);\r\n    });\r\n\r\n    try {\r\n      setLoading(true);\r\n\r\n      const res = await fetch(`${baseUrl}/api/Portfolio/${id}/images`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: formData,\r\n      });\r\n\r\n      if (!res.ok) throw new Error(\"Failed to upload images\");\r\n\r\n      setSuccessMessage(\"✅ Images uploaded successfully\");\r\n\r\n      setTimeout(() => {\r\n        if (saveData?.workerId) {\r\n          router.push(`/viewprofile/${saveData.workerId}/portfolio`);\r\n        } else {\r\n          router.push(\"/\");\r\n        }\r\n      }, 1500);\r\n    } catch (err) {\r\n      console.error(\"❌ Error uploading image:\", err);\r\n      setErrorMessage(\"Something went wrong while uploading.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-20 text-center\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-4 border-t-blue-600 border-gray-300 mb-4\"></div>\r\n        <h3 className=\"text-lg font-semibold text-gray-700\">Uploading images...</h3>\r\n        <p className=\"text-sm text-gray-400 mt-1\">Please wait</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100 flex items-center justify-center px-4 py-10\">\r\n      <div className=\"w-full max-w-lg bg-white p-8 rounded-xl shadow\">\r\n        <h1 className=\"text-2xl font-bold text-green-700 text-center mb-6\">\r\n          Add Portfolio Images\r\n        </h1>\r\n\r\n        {successMessage && (\r\n          <div className=\"bg-green-100 text-green-700 border border-green-300 rounded px-4 py-2 text-sm mb-4 text-center\">\r\n            {successMessage}\r\n          </div>\r\n        )}\r\n        {errorMessage && (\r\n          <div className=\"bg-red-100 text-red-700 border border-red-300 rounded px-4 py-2 text-sm mb-4 text-center\">\r\n            {errorMessage}\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n          <div>\r\n            <label className=\"block mb-1 text-sm font-medium text-gray-700\">\r\n              Select Images\r\n            </label>\r\n            <input\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              multiple\r\n              onChange={(e) => setFiles(e.target.files)}\r\n              className=\"w-full border border-gray-300 px-4 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {files && (\r\n            <div className=\"grid grid-cols-3 gap-3\">\r\n              {Array.from(files).map((file) => (\r\n                <img\r\n                  key={file.name}\r\n                  src={URL.createObjectURL(file)}\r\n                  alt={file.name}\r\n                  className=\"h-24 w-full object-cover rounded\"\r\n                />\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex justify-between pt-4\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => router.back()}\r\n              className=\"bg-gray-200 hover:bg-gray-300 text-gray-800 text-sm px-4 py-2 rounded transition\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"bg-green-600 hover:bg-green-700 text-white text-sm px-5 py-2 rounded transition\"\r\n            >\r\n              Upload Images\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 240, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}