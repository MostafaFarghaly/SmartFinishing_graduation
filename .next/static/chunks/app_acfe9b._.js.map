{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/front_end/projects/next_js/smart-finshing/app/components/Nav/page.tsx"],"sourcesContent":["\"use client\";\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\nimport Link from \"next/link\";\r\nimport { useToken } from \"../../context/token_context\";\r\nimport { useLoginClient } from \"../../context/regester/login_context\";\r\nimport {\r\n  UserCircleIcon,\r\n  ChevronDownIcon,\r\n  ArrowRightOnRectangleIcon,\r\n  LifebuoyIcon,\r\n} from \"@heroicons/react/24/outline\";\r\nimport { useState, useRef, useEffect } from \"react\";\r\n\r\nexport default function MinimalNavbar() {\r\n  const { userData, logOut } = useToken();\r\n  const { saveData } = useLoginClient();\r\n  const [dropOpen, setDropOpen] = useState(false);\r\n  const dropRef = useRef(null);\r\n\r\n  // حالة للتحميل على الأزرار والروابط\r\n  const [loadingBtn, setLoadingBtn] = useState({\r\n    requests: false,\r\n    projects: false,\r\n    account: false,\r\n    support: false,\r\n    logout: false,\r\n    login: false,\r\n    signup: false,\r\n  });\r\n\r\n  const role =\r\n    userData?.[\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"] || \"\";\r\n  const isCustomer = role.toLowerCase() === \"customer\";\r\n  const isWorker = role.toLowerCase() === \"worker\";\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (e) => {\r\n      if (dropRef.current && !dropRef.current.contains(e.target)) {\r\n        setDropOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  // دالة لتعيين حالة تحميل مؤقتة (مثلا 2 ثانية)\r\n  const handleLoading = (key) => {\r\n    setLoadingBtn((prev) => ({ ...prev, [key]: true }));\r\n    // ممكن هنا تعمل actual async operation\r\n    setTimeout(() => {\r\n      setLoadingBtn((prev) => ({ ...prev, [key]: false }));\r\n    }, 2000);\r\n  };\r\n\r\n  // تعديل دالة logOut لإظهار تحميل أثناء العملية\r\n  const handleLogout = () => {\r\n    setLoadingBtn((prev) => ({ ...prev, logout: true }));\r\n    Promise.resolve(logOut()) // تأكد أن logOut ترجع Promise\r\n      .finally(() => {\r\n        setLoadingBtn((prev) => ({ ...prev, logout: false }));\r\n      });\r\n  };\r\n\r\n  return (\r\n    <nav className=\"relative p-4 text-black shadow-md backdrop-blur-sm z-[9999]\">\r\n      <div className=\"container mx-auto flex justify-between items-center\">\r\n        {/* Logo */}\r\n        <Link href=\"/\" className=\"text-xl font-bold flex items-center\">\r\n          <span className=\"inline-block w-5 h-5 mr-2 rounded-full\" />\r\n          logo\r\n        </Link>\r\n\r\n        {/* Right section */}\r\n        <div\r\n          className={`lg:flex lg:items-center lg:w-auto w-full lg:block mt-4 lg:mt-0`}\r\n          ref={dropRef}\r\n        >\r\n          {userData ? (\r\n            <>\r\n              <div className=\"flex gap-4 font-medium px-2\">\r\n                <Link\r\n                  href=\"/requests\"\r\n                  className={`hover:text-green-400 px-3 py-1 rounded ${\r\n                    loadingBtn.requests ? \"opacity-50 pointer-events-none\" : \"\"\r\n                  }`}\r\n                  onClick={() => handleLoading(\"requests\")}\r\n                >\r\n                  {loadingBtn.requests ?  <i className=\"fa fa-spinner fa-spin\"></i> : \"Requests\"}\r\n                </Link>\r\n                {!isWorker && (\r\n                  <Link\r\n                    href=\"/projects\"\r\n                    className={`hover:text-green-400 px-3 py-1 rounded ${\r\n                      loadingBtn.projects ? \"opacity-50 pointer-events-none\" : \"\"\r\n                    }`}\r\n                    onClick={() => handleLoading(\"projects\")}\r\n                  >\r\n                    {loadingBtn.projects ?  <i className=\"fa fa-spinner fa-spin\"></i> : \"Projects\"}\r\n                  </Link>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"relative ml-4\">\r\n                <button\r\n                  onClick={() => setDropOpen(!dropOpen)}\r\n                  className=\"z-[9999] relative flex items-center bg-green-500 text-white px-4 py-2 rounded-md hover:bg-opacity-90 focus:outline-none\"\r\n                >\r\n                  <UserCircleIcon className=\"h-5 w-5\" />\r\n                  <span className=\"ml-2\">\r\n                    {saveData.displayName.split(\" \")[0]}\r\n                  </span>\r\n                  <ChevronDownIcon\r\n                    className={`h-4 w-4 ml-1 transform transition-transform ${\r\n                      dropOpen ? \"rotate-180\" : \"\"\r\n                    }`}\r\n                  />\r\n                </button>\r\n\r\n                {dropOpen && (\r\n                  <div className=\"fixed top-16 right-4 w-40 bg-white border border-gray-200 rounded-lg shadow-lg z-[99999] overflow-hidden text-black\">\r\n                    <Link\r\n                      href=\"/account\"\r\n                      className={`flex items-center px-4 py-2 hover:bg-gray-100 ${\r\n                        loadingBtn.account ? \"opacity-50 pointer-events-none\" : \"\"\r\n                      }`}\r\n                      onClick={() => handleLoading(\"account\")}\r\n                    >\r\n                      <UserCircleIcon className=\"h-5 w-5 mr-2 text-gray-600\" />{\" \"}\r\n                      {loadingBtn.account ?  <i className=\"fa fa-spinner fa-spin\"></i> : \"Account\"}\r\n                    </Link>\r\n                    <Link\r\n                      href=\"/support\"\r\n                      className={`flex items-center px-4 py-2 bg-green-50 hover:bg-green-100 ${\r\n                        loadingBtn.support ? \"opacity-50 pointer-events-none\" : \"\"\r\n                      }`}\r\n                      onClick={() => handleLoading(\"support\")}\r\n                    >\r\n                      <LifebuoyIcon className=\"h-5 w-5 mr-2 text-green-600\" />{\" \"}\r\n                      {loadingBtn.support ?  <i className=\"fa fa-spinner fa-spin\"></i> : \"Support\"}\r\n                    </Link>\r\n                    <button\r\n                      onClick={handleLogout}\r\n                      disabled={loadingBtn.logout}\r\n                      className={`w-full text-left flex items-center px-4 py-2 hover:bg-gray-100 ${\r\n                        loadingBtn.logout ? \"opacity-50 pointer-events-none\" : \"\"\r\n                      }`}\r\n                    >\r\n                      <ArrowRightOnRectangleIcon className=\"h-5 w-5 mr-2 text-gray-600\" />{\" \"}\r\n                      {loadingBtn.logout ? \"Logging out...\" : \"Log out\"}\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <div className=\"flex items-center justify-center space-x-4\">\r\n              <Link\r\n                href=\"/login\"\r\n                className={`px-4 py-2 border text-white rounded-md hover:bg-gray-100 ${\r\n                  loadingBtn.login ? \"opacity-50 pointer-events-none\" : \"\"\r\n                }`}\r\n                onClick={() => handleLoading(\"login\")}\r\n              >\r\n                {loadingBtn.login ?  <i className=\"fa fa-spinner fa-spin\"></i> : \"Login\"}\r\n              </Link>\r\n              <Link\r\n                href=\"/signup\"\r\n                className={`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 ${\r\n                  loadingBtn.signup ? \"opacity-50 pointer-events-none\" : \"\"\r\n                }`}\r\n                onClick={() => handleLoading(\"signup\")}\r\n              >\r\n                {loadingBtn.signup ?  <i className=\"fa fa-spinner fa-spin\"></i> : \"Sign Up\"}\r\n              </Link>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 352, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 358, "column": 0}, "map": {"version":3,"sources":["file://D%3A/front_end/projects/next_js/smart-finshing/app/requests/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useApi } from \"../context/ApiContext\";\r\nimport { useToken } from \"../context/token_context\";\r\nimport { useLoginClient } from \"../context/regester/login_context\";\r\nimport Link from \"next/link\";\r\nimport Navbar from \"../components/Nav/page\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\n\r\ntype Request = {\r\n    id: number;\r\n    workerName: string;\r\n    customerName: string;\r\n    serviceName: string;\r\n    projectName: string;\r\n    status: string;\r\n    requestDate?: string;\r\n    customerAddress?: string;\r\n    customerCity?: string;\r\n    workerOfferedPrice?: number;\r\n    finalAgreedPrice?: number;\r\n    minBudget?: number;\r\n    maxBudget?: number;\r\n};\r\n\r\nconst STATUS_LABELS: Record<string, string> = {\r\n    Pending: \"pending\",\r\n    Accepted: \"accepted\",\r\n    Completed: \"completed\",\r\n    Cancelled: \"cancelled\",\r\n    Rejected: \"rejected\",\r\n    Approve: \"approved\",\r\n};\r\n\r\nconst STATUS_COLORS: Record<string, string> = {\r\n    Pending: \"text-yellow-500\",\r\n    Accepted: \"text-green-600\",\r\n    Completed: \"text-gray-500\",\r\n    Cancelled: \"text-red-600\",\r\n    Rejected: \"text-red-700\",\r\n    Approve: \"text-green-600\",\r\n};\r\n\r\nconst TABS = [\r\n    { label: \"All\", value: \"all\" },\r\n    { label: \"Pending\", value: \"Pending\" },\r\n    { label: \"Accepted\", value: \"Accepted\" },\r\n    { label: \"Completed\", value: \"Completed\" },\r\n    { label: \"Cancelled\", value: \"Cancelled\" },\r\n    { label: \"Rejected\", value: \"Rejected\" },\r\n];\r\n\r\nexport default function RequestsPage() {\r\n    const { baseUrl } = useApi();\r\n    const [requests, setRequests] = useState<Request[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [tab, setTab] = useState(\"all\");\r\n    const [selectedRequest, setSelectedRequest] = useState<Request | null>(null);\r\n    const [offeredPrice, setOfferedPrice] = useState<string>(\"\");\r\n    const [showReviewForm, setShowReviewForm] = useState(false);\r\n    const [reviewRequestId, setReviewRequestId] = useState<number | null>(null);\r\n    const [comment, setComment] = useState(\"\");\r\n    const [rating, setRating] = useState(5);\r\n    const [message, setMessage] = useState<string | null>(null);\r\n    const [actionLoading, setActionLoading] = useState<number | null>(null);\r\n    const [priceModalLoading, setPriceModalLoading] = useState(false);\r\n    const [reviewModalLoading, setReviewModalLoading] = useState(false);\r\n    const router = useRouter();\r\n\r\n    const { userData } = useToken();\r\n    const { saveData } = useLoginClient();\r\n\r\n    const role = userData?.[\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"] || \"\";\r\n    const isCustomer = role.toLowerCase() === \"customer\";\r\n    const isWorker = role.toLowerCase() === \"worker\";\r\n\r\n    useEffect(() => {\r\n        const fetchRequests = async () => {\r\n            try {\r\n                const token = localStorage.getItem(\"token\");\r\n                if (!token || (!isCustomer && !isWorker)) return;\r\n\r\n                const url = isCustomer\r\n                    ? `${baseUrl}/api/Requests/customer-requests`\r\n                    : `${baseUrl}/api/Requests/received-requests`;\r\n\r\n                const res = await fetch(url, {\r\n                    headers: {\r\n                        Authorization: `Bearer ${token}`,\r\n                    },\r\n                });\r\n\r\n                if (!res.ok) {\r\n                    const errorText = await res.text();\r\n                    throw new Error(`Failed to fetch requests: ${res.status} - ${errorText}`);\r\n                }\r\n\r\n                const data = await res.json();\r\n                setRequests(data);\r\n            } catch (err: any) {\r\n                setError(err.message || \"An error occurred\");\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchRequests();\r\n    }, [baseUrl, isCustomer, isWorker]);\r\n\r\n    const cancelRequest = async (requestId: number) => {\r\n        setActionLoading(requestId);\r\n        try {\r\n            const token = localStorage.getItem(\"token\");\r\n            const res = await fetch(`${baseUrl}/api/Requests/customer-cancel/${requestId}`, {\r\n                method: \"PUT\",\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n            });\r\n\r\n            if (!res.ok) throw new Error(\"Failed to cancel the request\");\r\n\r\n            const updated = await res.json();\r\n            setRequests((prev) =>\r\n                prev.map((req) => (req.id === requestId ? { ...req, status: updated.status } : req))\r\n            );\r\n            setMessage(\"✅ Request cancelled successfully\");\r\n        } catch (err: any) {\r\n            setMessage(\"❌ \" + err.message);\r\n        } finally {\r\n            setActionLoading(null);\r\n        }\r\n    };\r\n\r\n    const acceptRequest = async () => {\r\n        if (!selectedRequest?.id || !offeredPrice) return;\r\n        setPriceModalLoading(true);\r\n        try {\r\n            const token = localStorage.getItem(\"token\");\r\n            const res = await fetch(\r\n                `${baseUrl}/api/Requests/worker-accept/${selectedRequest.id}`,\r\n                {\r\n                    method: \"PUT\",\r\n                    headers: {\r\n                        Authorization: `Bearer ${token}`,\r\n                        \"Content-Type\": \"application/json\",\r\n                    },\r\n                    body: JSON.stringify(Number(offeredPrice)),\r\n                }\r\n            );\r\n            if (!res.ok) throw new Error(\"Failed to accept the request\");\r\n            const updated = await res.json();\r\n            setRequests((prev) =>\r\n                prev.map((req) =>\r\n                    req.id === selectedRequest.id\r\n                        ? { ...req, status: updated.status, workerOfferedPrice: Number(offeredPrice) }\r\n                        : req\r\n                )\r\n            );\r\n            setMessage(\"✅ Request accepted\");\r\n            setSelectedRequest(null);\r\n            setOfferedPrice(\"\");\r\n        } catch (err: any) {\r\n            setMessage(\"❌ \" + err.message);\r\n        } finally {\r\n            setPriceModalLoading(false);\r\n        }\r\n    };\r\n\r\n    const rejectRequest = async (requestId: number) => {\r\n        setActionLoading(requestId);\r\n        try {\r\n            const token = localStorage.getItem(\"token\");\r\n            const res = await fetch(`${baseUrl}/api/Requests/worker-reject/${requestId}`, {\r\n                method: \"PUT\",\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                },\r\n            });\r\n\r\n            if (!res.ok) throw new Error(\"Failed to reject the request\");\r\n\r\n            const updated = await res.json();\r\n            setRequests((prev) =>\r\n                prev.map((req) => (req.id === requestId ? { ...req, status: updated.status } : req))\r\n            );\r\n            setMessage(\"❌ Request rejected\");\r\n        } catch (err: any) {\r\n            setMessage(\"❌ \" + err.message);\r\n        } finally {\r\n            setActionLoading(null);\r\n        }\r\n    };\r\n\r\n    const approveRequest = async (requestId: number) => {\r\n        setActionLoading(requestId);\r\n        try {\r\n            const token = localStorage.getItem(\"token\");\r\n            const res = await fetch(`${baseUrl}/api/Requests/customer-approve/${requestId}`, {\r\n                method: \"PUT\",\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n                body: JSON.stringify(true),\r\n            });\r\n\r\n            if (!res.ok) throw new Error(\"Failed to approve the price\");\r\n\r\n            const updated = await res.json();\r\n            setRequests((prev) =>\r\n                prev.map((req) =>\r\n                    req.id === requestId\r\n                        ? { ...req, status: updated.status, finalAgreedPrice: updated.finalAgreedPrice }\r\n                        : req\r\n                )\r\n            );\r\n            setMessage(\"✅ Price approved successfully\");\r\n        } catch (err: any) {\r\n            setMessage(\"❌ \" + err.message);\r\n        } finally {\r\n            setActionLoading(null);\r\n        }\r\n    };\r\n\r\n    const declinePrice = async (requestId: number) => {\r\n        setActionLoading(requestId);\r\n        try {\r\n            const token = localStorage.getItem(\"token\");\r\n            const res = await fetch(`${baseUrl}/api/Requests/customer-approve/${requestId}`, {\r\n                method: \"PUT\",\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n                body: JSON.stringify(false),\r\n            });\r\n\r\n            if (!res.ok) throw new Error(\"Failed to reject the price\");\r\n\r\n            const updated = await res.json();\r\n            setRequests((prev) =>\r\n                prev.map((req) => (req.id === requestId ? { ...req, status: updated.status } : req))\r\n            );\r\n            setMessage(\"❌ Price rejected\");\r\n        } catch (err: any) {\r\n            setMessage(\"❌ \" + err.message);\r\n        } finally {\r\n            setActionLoading(null);\r\n        }\r\n    };\r\n\r\n    const markAsCompleted = async (requestId: number) => {\r\n        setActionLoading(requestId);\r\n        try {\r\n            const token = localStorage.getItem(\"token\");\r\n            const res = await fetch(`${baseUrl}/api/Requests/mark-completed/${requestId}`, {\r\n                method: \"PUT\",\r\n                headers: { Authorization: `Bearer ${token}` },\r\n            });\r\n\r\n            if (!res.ok) {\r\n                const text = await res.text();\r\n                throw new Error(`Error ${res.status}: ${text}`);\r\n            }\r\n\r\n            const updated = await res.json();\r\n            setRequests(prev =>\r\n                prev.map(r => (r.id === requestId ? { ...r, status: updated.status } : r))\r\n            );\r\n            setMessage(\"✅ Request marked as completed\");\r\n        } catch (err: any) {\r\n            setMessage(\"❌ \" + err.message);\r\n        } finally {\r\n            setActionLoading(null);\r\n        }\r\n    };\r\n\r\n    const submitReview = async () => {\r\n        if (!reviewRequestId || !comment || rating < 1 || rating > 5) {\r\n            setMessage(\"Please fill in all fields correctly\");\r\n            return;\r\n        }\r\n        setReviewModalLoading(true);\r\n        try {\r\n            const token = localStorage.getItem(\"token\");\r\n            const request = requests.find((r) => r.id === reviewRequestId);\r\n            if (!request?.workerId) throw new Error(\"No valid workerId found\");\r\n\r\n            const res = await fetch(`${baseUrl}/api/Reviews`, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n                body: JSON.stringify({\r\n                    workerId: request.workerId,\r\n                    comment,\r\n                    rating,\r\n                }),\r\n            });\r\n\r\n            if (!res.ok) throw new Error(\"Failed to submit the review\");\r\n\r\n            setMessage(\"✅ Review submitted successfully\");\r\n            setShowReviewForm(false);\r\n            setReviewRequestId(null);\r\n            setComment(\"\");\r\n            setRating(5);\r\n        } catch (err: any) {\r\n            setMessage(\"❌ \" + err.message);\r\n        } finally {\r\n            setReviewModalLoading(false);\r\n        }\r\n    };\r\n\r\n    const filteredRequests = tab === \"all\" ? requests : requests.filter((req) => req.status === tab);\r\n\r\n    if (loading) return (\r\n        <div className=\"flex flex-col items-center justify-center py-20 text-center\">\r\n            <div className=\"animate-spin rounded-full h-16 w-16 border-4 border-t-green-600 border-gray-300 mb-4\"></div>\r\n            <h3 className=\"text-lg font-semibold text-gray-700\">Loading data...</h3>\r\n            <p className=\"text-sm text-gray-400 mt-1\">Please wait a moment</p>\r\n        </div>\r\n    );\r\n\r\n    if (error) return <div className=\"p-6 text-red-600\">Error: {error}</div>;\r\n\r\n    return (\r\n        <>\r\n            <Navbar />\r\n            <div className=\"p-6 max-w-3xl mx-auto\">\r\n                <h1 className=\"text-2xl font-bold mb-4\">Requests</h1>\r\n                {message && (\r\n                    <div className=\"mb-4 p-3 rounded bg-blue-100 text-blue-800 border border-blue-300\">\r\n                        {message}\r\n                    </div>\r\n                )}\r\n                <div className=\"flex gap-2 mb-6 overflow-x-auto pb-2\">\r\n                    {TABS.map((t) => (\r\n                        <button\r\n                            key={t.value}\r\n                            onClick={() => setTab(t.value)}\r\n                            className={`px-4 py-1 rounded-full border transition ${\r\n                                tab === t.value\r\n                                    ? \"bg-green-600 text-white font-bold\"\r\n                                    : \"bg-gray-100 text-gray-700\"\r\n                            }`}\r\n                        >\r\n                            {t.label}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n\r\n                {filteredRequests.length === 0 ? (\r\n                    <p className=\"text-gray-500\">No requests found.</p>\r\n                ) : (\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        {filteredRequests.map((req) => (\r\n                            <div\r\n                                key={req.id}\r\n                                onClick={() => router.push(`/RequestDetails/${req.id}`)}\r\n                                className=\"bg-white border rounded-xl p-5 flex items-center justify-between shadow-sm cursor-pointer hover:bg-gray-50 transition\"\r\n                            >\r\n                                <div className=\"flex-1\">\r\n                                    <div className=\"font-bold text-lg mb-1\">Project: {req.projectName}</div>\r\n                                    <div className=\"text-gray-700\">{req.serviceName}</div>\r\n                                    <div className=\"text-sm text-gray-500 mt-1\">\r\n                                        Date: {req.requestDate ? new Date(req.requestDate).toLocaleDateString() : \"N/A\"}\r\n                                    </div>\r\n                                    <div className=\"text-sm text-gray-500 mt-1\">\r\n                                        Address: {req.customerAddress || \"\"}, {req.customerCity || \"\"}\r\n                                    </div>\r\n\r\n                                    {typeof req.minBudget === \"number\" && typeof req.maxBudget === \"number\" && (\r\n                                        <div className=\"text-sm text-gray-600 mt-1\">\r\n                                            Budget Range: {req.minBudget.toLocaleString()} - {req.maxBudget.toLocaleString()} EGP\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {req.status === \"Approve\" &&\r\n                                        typeof req.workerOfferedPrice === \"number\" && isCustomer && (\r\n                                            <div className=\"bg-green-50 border border-green-200 rounded-xl p-4 mt-4 shadow-sm\">\r\n                                                <div className=\"flex items-center gap-2 mb-2\">\r\n                                                    <div className=\"bg-green-100 text-green-700 p-2 rounded-full\">\r\n                                                        <i className=\"fas fa-dollar-sign\"></i>\r\n                                                    </div>\r\n                                                    <h3 className=\"text-green-700 font-bold text-lg\">Final Offer</h3>\r\n                                                </div>\r\n\r\n                                                <p className=\"text-3xl font-extrabold text-green-800 mb-1\">\r\n                                                    {req.workerOfferedPrice.toLocaleString()} EGP\r\n                                                </p>\r\n\r\n                                                <p className=\"text-sm text-gray-600 mb-4\">\r\n                                                    Worker has provided their final pricing\r\n                                                </p>\r\n\r\n                                                <div className=\"flex justify-between\">\r\n                                                    <button\r\n                                                        onClick={(e) => {\r\n                                                            e.stopPropagation();\r\n                                                            approveRequest(req.id);\r\n                                                        }}\r\n                                                        className=\"text-green-600 font-semibold hover:underline flex items-center gap-1\"\r\n                                                        disabled={actionLoading === req.id}\r\n                                                    >\r\n                                                        {actionLoading === req.id ? (\r\n                                                            <>\r\n                                                                <i className=\"fas fa-spinner fa-spin\"></i> Processing...\r\n                                                            </>\r\n                                                        ) : (\r\n                                                            \"Accept Offer\"\r\n                                                        )}\r\n                                                    </button>\r\n                                                    <button\r\n                                                        onClick={(e) => {\r\n                                                            e.stopPropagation();\r\n                                                            declinePrice(req.id);\r\n                                                        }}\r\n                                                        className=\"text-red-600 font-semibold hover:underline flex items-center gap-1\"\r\n                                                        disabled={actionLoading === req.id}\r\n                                                    >\r\n                                                        {actionLoading === req.id ? (\r\n                                                            <>\r\n                                                                <i className=\"fas fa-spinner fa-spin\"></i> Processing...\r\n                                                            </>\r\n                                                        ) : (\r\n                                                            \"Reject Offer\"\r\n                                                        )}\r\n                                                    </button>\r\n                                                </div>\r\n                                            </div>\r\n                                        )}\r\n\r\n                                    {typeof req.finalAgreedPrice === \"number\" && (\r\n                                        <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4 mt-4 shadow-sm\">\r\n                                            <div className=\"flex items-center gap-2 mb-2\">\r\n                                                <div className=\"bg-blue-100 text-blue-700 p-2 rounded-full\">\r\n                                                    <i className=\"fas fa-check-circle\"></i>\r\n                                                </div>\r\n                                                <h3 className=\"text-blue-700 font-bold text-lg\">Final Price</h3>\r\n                                            </div>\r\n\r\n                                            <p className=\"text-2xl font-bold text-blue-800\">\r\n                                                {req.finalAgreedPrice.toLocaleString()} EGP\r\n                                            </p>\r\n\r\n                                            <p className=\"text-sm text-gray-600 mt-1\">Agreed between customer and worker</p>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    <div className=\"flex flex-wrap gap-2 mt-4\">\r\n                                        {!['Completed', 'Cancelled', 'Rejected'].includes(req.status) && (\r\n    <button\r\n        onClick={async (e) => {\r\n            e.stopPropagation();\r\n            try {\r\n                setActionLoading(req.id);\r\n                \r\n                // Close SignalR connection if exists\r\n                if (window.signalRConnection) {\r\n                    await window.signalRConnection.stop();\r\n                }\r\n                \r\n                // Navigate to chat\r\n                router.push(`/chat/${req.id}`);\r\n            } catch (error) {\r\n                console.error(\"Navigation error:\", error);\r\n                setActionLoading(null);\r\n            }\r\n        }}\r\n        className=\"bg-green-600 text-white px-4 py-1 rounded hover:bg-green-700 transition duration-200 flex items-center gap-1 min-w-[120px] justify-center\"\r\n        disabled={actionLoading === req.id}\r\n    >\r\n        {actionLoading === req.id ? (\r\n            <>\r\n                <i className=\"fas fa-spinner fa-spin\"></i> \r\n                <span className=\"ml-1\">Opening...</span>\r\n            </>\r\n        ) : (\r\n            <>\r\n                <i className=\"fas fa-comments\"></i> \r\n                <span className=\"ml-1\">Go to Chat</span>\r\n            </>\r\n        )}\r\n    </button>\r\n)}\r\n\r\n                                        {isCustomer && (\r\n                                            <>\r\n                                                {req.status === \"Pending\" && (\r\n                                                    <button\r\n                                                        onClick={(e) => {\r\n                                                            e.stopPropagation();\r\n                                                            cancelRequest(req.id);\r\n                                                        }}\r\n                                                        className=\"bg-red-600 text-white px-4 py-1 rounded hover:bg-red-700 transition duration-200 flex items-center gap-1\"\r\n                                                        disabled={actionLoading === req.id}\r\n                                                    >\r\n                                                        {actionLoading === req.id ? (\r\n                                                            <>\r\n                                                                <i className=\"fas fa-spinner fa-spin\"></i> Cancelling...\r\n                                                            </>\r\n                                                        ) : (\r\n                                                            <>\r\n                                                                <i className=\"fas fa-times\"></i> Cancel Request\r\n                                                            </>\r\n                                                        )}\r\n                                                    </button>\r\n                                                )}\r\n\r\n                                                {req.status === \"Accepted\" && (\r\n                                                    <button\r\n                                                        onClick={(e) => {\r\n                                                            e.stopPropagation();\r\n                                                            markAsCompleted(req.id);\r\n                                                        }}\r\n                                                        className=\"bg-green-600 text-white px-4 py-1 rounded hover:bg-green-700 transition duration-200 flex items-center gap-1\"\r\n                                                        disabled={actionLoading === req.id}\r\n                                                    >\r\n                                                        {actionLoading === req.id ? (\r\n                                                            <>\r\n                                                                <i className=\"fas fa-spinner fa-spin\"></i> Completing...\r\n                                                            </>\r\n                                                        ) : (\r\n                                                            <>\r\n                                                                <i className=\"fas fa-check\"></i> Mark as Completed\r\n                                                            </>\r\n                                                        )}\r\n                                                    </button>\r\n                                                )}\r\n\r\n                                                {req.status === \"Completed\" && (\r\n                                                    <button\r\n                                                        onClick={(e) => {\r\n                                                            e.stopPropagation();\r\n                                                            setShowReviewForm(true);\r\n                                                            setReviewRequestId(req.id);\r\n                                                        }}\r\n                                                        className=\"bg-green-600 text-white px-4 py-1 rounded hover:bg-green-700 transition duration-200 flex items-center gap-1\"\r\n                                                    >\r\n                                                        <i className=\"fas fa-star\"></i> Add Review\r\n                                                    </button>\r\n                                                )}\r\n                                            </>\r\n                                        )}\r\n\r\n                                        {isWorker && req.status === \"Pending\" && (\r\n                                            <div className=\"flex gap-2\">\r\n                                                <button\r\n                                                    onClick={(e) => {\r\n                                                        e.stopPropagation();\r\n                                                        setSelectedRequest(req);\r\n                                                    }}\r\n                                                    className=\"bg-green-600 text-white px-4 py-1 rounded hover:bg-green-700 transition duration-200 flex items-center gap-1\"\r\n                                                >\r\n                                                    <i className=\"fas fa-check\"></i> Accept\r\n                                                </button>\r\n                                                <button\r\n                                                    onClick={(e) => {\r\n                                                        e.stopPropagation();\r\n                                                        rejectRequest(req.id);\r\n                                                    }}\r\n                                                    className=\"bg-red-600 text-white px-4 py-1 rounded hover:bg-red-700 transition duration-200 flex items-center gap-1\"\r\n                                                    disabled={actionLoading === req.id}\r\n                                                >\r\n                                                    {actionLoading === req.id ? (\r\n                                                        <>\r\n                                                            <i className=\"fas fa-spinner fa-spin\"></i> Rejecting...\r\n                                                        </>\r\n                                                    ) : (\r\n                                                        <>\r\n                                                            <i className=\"fas fa-times\"></i> Reject\r\n                                                        </>\r\n                                                    )}\r\n                                                </button>\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"flex flex-col items-center min-w-[100px]\">\r\n                                    <span className={`capitalize font-semibold ${STATUS_COLORS[req.status]}`}>\r\n                                        {STATUS_LABELS[req.status]}\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n\r\n                {selectedRequest && (\r\n                    <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\">\r\n                        <div className=\"bg-white p-6 rounded-lg shadow-md w-full max-w-md\">\r\n                            <h2 className=\"text-lg font-bold mb-2\">Set Your Price</h2>\r\n\r\n                            {typeof selectedRequest.minBudget === \"number\" && typeof selectedRequest.maxBudget === \"number\" && (\r\n                                <p className=\"text-sm text-gray-600 mb-4\">\r\n                                    Customer budget: {selectedRequest.minBudget.toLocaleString()} - {selectedRequest.maxBudget.toLocaleString()} EGP\r\n                                </p>\r\n                            )}\r\n\r\n                            <div className=\"mb-4\">\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Your Price (EGP)</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={offeredPrice}\r\n                                    onChange={(e) => setOfferedPrice(e.target.value)}\r\n                                    className=\"border w-full p-2 rounded\"\r\n                                    placeholder=\"Enter your price\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"flex justify-end gap-2\">\r\n                                <button\r\n                                    onClick={() => {\r\n                                        setSelectedRequest(null);\r\n                                        setOfferedPrice(\"\");\r\n                                    }}\r\n                                    className=\"px-4 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100 transition\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    onClick={acceptRequest}\r\n                                    className=\"bg-green-600 text-white px-4 py-1 rounded hover:bg-green-700 transition flex items-center gap-1\"\r\n                                    disabled={priceModalLoading}\r\n                                >\r\n                                    {priceModalLoading ? (\r\n                                        <>\r\n                                            <i className=\"fas fa-spinner fa-spin\"></i> Processing...\r\n                                        </>\r\n                                    ) : (\r\n                                        \"Confirm Price\"\r\n                                    )}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {showReviewForm && (\r\n                    <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-[9999]\">\r\n                        <div className=\"bg-white p-8 rounded-xl shadow-lg w-full max-w-md\">\r\n                            <h2 className=\"text-2xl font-bold mb-6 text-center text-gray-800\">\r\n                                How would you rate your overall experience?\r\n                            </h2>\r\n\r\n                            <div className=\"mb-6\">\r\n                                <h3 className=\"text-lg font-medium mb-3 text-center text-gray-700\">\r\n                                    Select a rating\r\n                                </h3>\r\n                                <div className=\"flex justify-center gap-2\">\r\n                                    {[1, 2, 3, 4, 5].map((star) => (\r\n                                        <button\r\n                                            key={star}\r\n                                            onClick={() => setRating(star)}\r\n                                            className={`text-3xl transition ${\r\n                                                rating >= star ? \"text-yellow-400\" : \"text-gray-300\"\r\n                                            }`}\r\n                                        >\r\n                                            ★\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"mb-6\">\r\n                                <h3 className=\"text-lg font-medium mb-3 text-gray-700\">\r\n                                    Your review\r\n                                </h3>\r\n                                <textarea\r\n                                    value={comment}\r\n                                    onChange={(e) => setComment(e.target.value)}\r\n                                    className=\"w-full border border-gray-300 rounded-lg p-4 text-base h-32 resize-none focus:border-green-500 focus:ring-1 focus:ring-green-500\"\r\n                                    placeholder=\"Write about your experience...\"\r\n                                />\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={submitReview}\r\n                                className=\"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg text-lg transition-colors flex items-center justify-center gap-2\"\r\n                                disabled={reviewModalLoading}\r\n                            >\r\n                                {reviewModalLoading ? (\r\n                                    <>\r\n                                        <i className=\"fas fa-spinner fa-spin\"></i> Submitting...\r\n                                    </>\r\n                                ) : (\r\n                                    \"Submit Review\"\r\n                                )}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1505, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}