{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/front_end/projects/next_js/smart-finshing/app/edit-portfolio/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { useLoginClient } from \"../../context/regester/login_context\";\r\nimport { useApi } from \"../../context/ApiContext\";\r\n\r\nexport default function EditPortfolioPage() {\r\n  const { token, saveData } = useLoginClient();\r\n  const { baseUrl } = useApi();\r\n  const params = useParams();\r\n  const router = useRouter();\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    description: \"\",\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const id = params.id;\r\n\r\n  useEffect(() => {\r\n    const fetchPortfolio = async () => {\r\n      try {\r\n        const res = await fetch(`${baseUrl}/api/Portfolio/${id}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            Accept: \"application/json\",\r\n          },\r\n        });\r\n\r\n        if (!res.ok) throw new Error(\"فشل في جلب البيانات\");\r\n\r\n        const data = await res.json();\r\n        setFormData({\r\n          name: data.name,\r\n          description: data.description,\r\n        });\r\n      } catch (err) {\r\n        console.error(\"❌ Error loading data\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (token && id) fetchPortfolio();\r\n  }, [token, id]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const res = await fetch(`${baseUrl}/api/Portfolio/${id}`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      if (!res.ok) throw new Error(\"فشل في التحديث\");\r\n\r\n      alert(\"تم تحديث البورتفوليو بنجاح\");\r\n\r\n      // ✅ إعادة التوجيه إلى صفحة البورتفوليو\r\n      router.push(`/viewprofile/${saveData.workerId}/portfolio`);\r\n    } catch (err) {\r\n      console.error(\"❌ Error updating portfolio:\", err);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div className=\"p-4\">جارٍ تحميل البيانات...</div>;\r\n\r\n  return (\r\n    <div className=\"max-w-md mx-auto p-4 bg-white shadow rounded mt-10\">\r\n      <h1 className=\"text-xl font-bold text-green-700 mb-4 text-center\">\r\n        تعديل البورتفوليو\r\n      </h1>\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"الاسم\"\r\n          value={formData.name}\r\n          onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n          className=\"w-full p-2 border rounded\"\r\n          required\r\n        />\r\n        <textarea\r\n          placeholder=\"الوصف\"\r\n          value={formData.description}\r\n          onChange={(e) =>\r\n            setFormData({ ...formData, description: e.target.value })\r\n          }\r\n          className=\"w-full p-2 border rounded\"\r\n          rows={4}\r\n          required\r\n        />\r\n\r\n        <div className=\"flex justify-between\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => router.back()}\r\n            className=\"bg-gray-300 hover:bg-gray-400 text-sm px-4 py-2 rounded\"\r\n          >\r\n            إلغاء\r\n          </button>\r\n          <button\r\n            type=\"submit\"\r\n            className=\"bg-green-600 hover:bg-green-700 text-white text-sm px-4 py-2 rounded\"\r\n          >\r\n            حفظ التعديلات\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file://D%3A/front_end/projects/next_js/smart-finshing/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}