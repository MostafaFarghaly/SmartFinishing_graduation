{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/front_end/projects/next_js/smart-finshing/app/AddPortfolio/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useLoginClient } from \"../context/regester/login_context\";\r\nimport { useApi } from \"../context/ApiContext\";\r\n\r\nexport default function AddPortfolioPage() {\r\n  const router = useRouter();\r\n  const { saveData } = useLoginClient();\r\n  const { baseUrl } = useApi();\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [images, setImages] = useState<FileList | null>(null);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [successMessage, setSuccessMessage] = useState(\"\");\r\n\r\n  const handleUpload = async () => {\r\n    if (!images || !name.trim() || !description.trim()) {\r\n      setError(\"Please fill in all fields and select at least one image.\");\r\n      setSuccessMessage(\"\");\r\n      return;\r\n    }\r\n\r\n    setUploading(true);\r\n    setError(\"\");\r\n    setSuccessMessage(\"\");\r\n\r\n    const formData = new FormData();\r\n    for (let i = 0; i < images.length; i++) {\r\n      formData.append(\"ImageFiles\", images[i]);\r\n    }\r\n\r\n    try {\r\n      const url = `${baseUrl}/api/Portfolio?Name=${encodeURIComponent(name)}&Description=${encodeURIComponent(description)}`;\r\n\r\n      const res = await fetch(url, {\r\n        method: \"POST\",\r\n        body: formData,\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          Authorization: `Bearer ${saveData?.token}`,\r\n        },\r\n      });\r\n\r\n      if (!res.ok) throw new Error(\"Failed to upload portfolio.\");\r\n\r\n      setSuccessMessage(\"âœ… Portfolio uploaded successfully!\");\r\n      setTimeout(() => {\r\n        router.push(`/viewprofile/${saveData?.workerId}`);\r\n      }, 1500);\r\n    } catch (err: any) {\r\n      setError(err.message || \"Something went wrong while uploading.\");\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  if (uploading) {\r\n    return (\r\n      <div className=\"flex flex-col justify-center items-center py-20 text-center\">\r\n        <div className=\"animate-spin rounded-full h-16 w-16 border-4 border-t-green-600 border-gray-300 mb-4\"></div>\r\n        <h3 className=\"text-lg font-semibold text-gray-700\">Uploading portfolio...</h3>\r\n        <p className=\"text-sm text-gray-500 mt-1\">Please wait</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100 py-10 px-4\">\r\n      <div className=\"max-w-xl mx-auto bg-white rounded-2xl shadow-lg p-8\">\r\n        <h1 className=\"text-2xl font-bold mb-6 text-center text-green-700\">\r\n          Upload New Portfolio\r\n        </h1>\r\n\r\n        {error && <p className=\"text-red-600 text-sm mb-4 text-center\">{error}</p>}\r\n        {successMessage && <p className=\"text-green-600 text-sm mb-4 text-center\">{successMessage}</p>}\r\n\r\n        <div className=\"mb-5\">\r\n          <label className=\"block mb-1 text-sm font-semibold text-gray-700\">Portfolio Name</label>\r\n          <input\r\n            type=\"text\"\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n            className=\"w-full border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-green-500 outline-none\"\r\n            placeholder=\"e.g., Plumbing Projects\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-5\">\r\n          <label className=\"block mb-1 text-sm font-semibold text-gray-700\">Description</label>\r\n          <textarea\r\n            value={description}\r\n            onChange={(e) => setDescription(e.target.value)}\r\n            className=\"w-full border border-gray-300 px-4 py-2 rounded-lg resize-none h-28 focus:ring-2 focus:ring-green-500 outline-none\"\r\n            placeholder=\"Briefly describe the portfolio\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-5\">\r\n          <label className=\"block mb-1 text-sm font-semibold text-gray-700\">Images</label>\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            multiple\r\n            onChange={(e) => setImages(e.target.files)}\r\n            className=\"block w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"\r\n          />\r\n        </div>\r\n\r\n        {images && (\r\n          <div className=\"grid grid-cols-3 gap-3 mb-5\">\r\n            {Array.from(images).map((img) => (\r\n              <img\r\n                key={img.name}\r\n                src={URL.createObjectURL(img)}\r\n                alt={img.name}\r\n                className=\"h-24 w-full object-cover rounded-lg border\"\r\n              />\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        <button\r\n          onClick={handleUpload}\r\n          disabled={uploading}\r\n          className=\"w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-semibold transition\"\r\n        >\r\n          {uploading ? (\r\n            <span className=\"flex justify-center items-center gap-2\">\r\n              <i className=\"fa fa-spinner fa-spin\"></i> Uploading...\r\n            </span>\r\n          ) : (\r\n            \"Upload Portfolio\"\r\n          )}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 280, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}