{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/front_end/projects/next_js/smart-finshing/app/edit-portfolio/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { useLoginClient } from \"../../context/regester/login_context\";\r\nimport { useApi } from \"../../context/ApiContext\";\r\n\r\nexport default function EditPortfolioPage() {\r\n  const { token, saveData } = useLoginClient();\r\n  const { baseUrl } = useApi();\r\n  const params = useParams();\r\n  const router = useRouter();\r\n\r\n  const [formData, setFormData] = useState({ name: \"\", description: \"\" });\r\n  const [loading, setLoading] = useState(true);\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [successMessage, setSuccessMessage] = useState(\"\");\r\n\r\n  const id = params.id;\r\n\r\n  useEffect(() => {\r\n    const fetchPortfolio = async () => {\r\n      try {\r\n        const res = await fetch(`${baseUrl}/api/Portfolio/${id}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            Accept: \"application/json\",\r\n          },\r\n        });\r\n\r\n        if (!res.ok) throw new Error(\"Failed to fetch portfolio data\");\r\n\r\n        const data = await res.json();\r\n        setFormData({ name: data.name, description: data.description });\r\n      } catch (err: any) {\r\n        setError(err.message || \"Error fetching data\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (token && id) fetchPortfolio();\r\n  }, [token, id]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setSubmitting(true);\r\n    setError(\"\");\r\n    setSuccessMessage(\"\");\r\n\r\n    try {\r\n      const res = await fetch(`${baseUrl}/api/Portfolio/${id}`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      if (!res.ok) throw new Error(\"Failed to update portfolio\");\r\n\r\n      setSuccessMessage(\"âœ… Portfolio updated successfully!\");\r\n      setTimeout(() => {\r\n        router.push(`/viewprofile/${saveData.workerId}/portfolio`);\r\n      }, 1200);\r\n    } catch (err: any) {\r\n      setError(err.message || \"Something went wrong\");\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (loading)\r\n    return (\r\n      <div className=\"flex justify-center items-center py-20 text-gray-600\">\r\n        <div className=\"flex items-center gap-3 text-lg\">\r\n          <svg className=\"animate-spin h-6 w-6 text-green-600\" viewBox=\"0 0 24 24\">\r\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" />\r\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v8z\" />\r\n          </svg>\r\n          Loading portfolio...\r\n        </div>\r\n      </div>\r\n    );\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-100 px-4 py-10\">\r\n      <div className=\"bg-white p-8 rounded-2xl shadow-md w-full max-w-lg\">\r\n        <h1 className=\"text-2xl font-bold text-center text-green-700 mb-6\">Edit Portfolio</h1>\r\n\r\n        {error && <p className=\"text-red-600 text-center mb-4 text-sm\">{error}</p>}\r\n        {successMessage && <p className=\"text-green-600 text-center mb-4 text-sm\">{successMessage}</p>}\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n          <div>\r\n            <label className=\"block mb-1 text-sm font-medium text-gray-700\">Portfolio Name</label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.name}\r\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n              className=\"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n              placeholder=\"e.g. Kitchen Renovation\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block mb-1 text-sm font-medium text-gray-700\">Description</label>\r\n            <textarea\r\n              value={formData.description}\r\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n              className=\"w-full border border-gray-300 rounded-lg px-4 py-2 h-28 resize-none focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n              placeholder=\"Add a short description...\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex justify-between items-center mt-6\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => router.back()}\r\n              className=\"px-4 py-2 rounded-md border text-gray-700 hover:bg-gray-100 transition\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={submitting}\r\n              className=\"px-5 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition font-medium\"\r\n            >\r\n              {submitting ? (\r\n                <span className=\"flex items-center gap-2\">\r\n                  <i className=\"fa fa-spinner fa-spin\"></i> Saving...\r\n                </span>\r\n              ) : (\r\n                \"Save Changes\"\r\n              )}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 313, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}