{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/front_end/projects/next_js/smart-finshing/app/components/Nav/page.tsx"],"sourcesContent":["\"use client\";\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\nimport Link from \"next/link\";\r\nimport { useToken } from \"../../context/token_context\";\r\nimport { useLoginClient } from \"../../context/regester/login_context\";\r\nimport {\r\n  UserCircleIcon,\r\n  ChevronDownIcon,\r\n  ArrowRightOnRectangleIcon,\r\n  LifebuoyIcon,\r\n} from \"@heroicons/react/24/outline\";\r\nimport { useState, useRef, useEffect } from \"react\";\r\n\r\nexport default function MinimalNavbar() {\r\n  const { userData, logOut } = useToken();\r\n  const { saveData } = useLoginClient();\r\n  const [dropOpen, setDropOpen] = useState(false);\r\n  const dropRef = useRef(null);\r\n\r\n  // حالة للتحميل على الأزرار والروابط\r\n  const [loadingBtn, setLoadingBtn] = useState({\r\n    requests: false,\r\n    projects: false,\r\n    account: false,\r\n    support: false,\r\n    logout: false,\r\n    login: false,\r\n    signup: false,\r\n  });\r\n\r\n  const role =\r\n    userData?.[\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"] || \"\";\r\n  const isCustomer = role.toLowerCase() === \"customer\";\r\n  const isWorker = role.toLowerCase() === \"worker\";\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (e) => {\r\n      if (dropRef.current && !dropRef.current.contains(e.target)) {\r\n        setDropOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  // دالة لتعيين حالة تحميل مؤقتة (مثلا 2 ثانية)\r\n  const handleLoading = (key) => {\r\n    setLoadingBtn((prev) => ({ ...prev, [key]: true }));\r\n    // ممكن هنا تعمل actual async operation\r\n    setTimeout(() => {\r\n      setLoadingBtn((prev) => ({ ...prev, [key]: false }));\r\n    }, 2000);\r\n  };\r\n\r\n  // تعديل دالة logOut لإظهار تحميل أثناء العملية\r\n  const handleLogout = () => {\r\n    setLoadingBtn((prev) => ({ ...prev, logout: true }));\r\n    Promise.resolve(logOut()) // تأكد أن logOut ترجع Promise\r\n      .finally(() => {\r\n        setLoadingBtn((prev) => ({ ...prev, logout: false }));\r\n      });\r\n  };\r\n\r\n  return (\r\n    <nav className=\"relative p-4 text-black shadow-md backdrop-blur-sm z-[9999]\">\r\n      <div className=\"container mx-auto flex justify-between items-center\">\r\n        {/* Logo */}\r\n        <Link href=\"/\" className=\"text-xl font-bold flex items-center\">\r\n          <span className=\"inline-block w-5 h-5 mr-2 rounded-full\" />\r\n          logo\r\n        </Link>\r\n\r\n        {/* Right section */}\r\n        <div\r\n          className={`lg:flex lg:items-center lg:w-auto w-full lg:block mt-4 lg:mt-0`}\r\n          ref={dropRef}\r\n        >\r\n          {userData ? (\r\n            <>\r\n              <div className=\"flex gap-4 font-medium px-2\">\r\n                <Link\r\n                  href=\"/requests\"\r\n                  className={`hover:text-green-400 px-3 py-1 rounded ${\r\n                    loadingBtn.requests ? \"opacity-50 pointer-events-none\" : \"\"\r\n                  }`}\r\n                  onClick={() => handleLoading(\"requests\")}\r\n                >\r\n                  {loadingBtn.requests ?  <i className=\"fa fa-spinner fa-spin\"></i> : \"Requests\"}\r\n                </Link>\r\n                {!isWorker && (\r\n                  <Link\r\n                    href=\"/projects\"\r\n                    className={`hover:text-green-400 px-3 py-1 rounded ${\r\n                      loadingBtn.projects ? \"opacity-50 pointer-events-none\" : \"\"\r\n                    }`}\r\n                    onClick={() => handleLoading(\"projects\")}\r\n                  >\r\n                    {loadingBtn.projects ?  <i className=\"fa fa-spinner fa-spin\"></i> : \"Projects\"}\r\n                  </Link>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"relative ml-4\">\r\n                <button\r\n                  onClick={() => setDropOpen(!dropOpen)}\r\n                  className=\"z-[9999] relative flex items-center bg-green-500 text-white px-4 py-2 rounded-md hover:bg-opacity-90 focus:outline-none\"\r\n                >\r\n                  <UserCircleIcon className=\"h-5 w-5\" />\r\n                  <span className=\"ml-2\">\r\n                    {saveData.displayName.split(\" \")[0]}\r\n                  </span>\r\n                  <ChevronDownIcon\r\n                    className={`h-4 w-4 ml-1 transform transition-transform ${\r\n                      dropOpen ? \"rotate-180\" : \"\"\r\n                    }`}\r\n                  />\r\n                </button>\r\n\r\n                {dropOpen && (\r\n                  <div className=\"fixed top-16 right-4 w-40 bg-white border border-gray-200 rounded-lg shadow-lg z-[99999] overflow-hidden text-black\">\r\n                    <Link\r\n                      href=\"/account\"\r\n                      className={`flex items-center px-4 py-2 hover:bg-gray-100 ${\r\n                        loadingBtn.account ? \"opacity-50 pointer-events-none\" : \"\"\r\n                      }`}\r\n                      onClick={() => handleLoading(\"account\")}\r\n                    >\r\n                      <UserCircleIcon className=\"h-5 w-5 mr-2 text-gray-600\" />{\" \"}\r\n                      {loadingBtn.account ?  <i className=\"fa fa-spinner fa-spin\"></i> : \"Account\"}\r\n                    </Link>\r\n                    <Link\r\n                      href=\"/support\"\r\n                      className={`flex items-center px-4 py-2 bg-green-50 hover:bg-green-100 ${\r\n                        loadingBtn.support ? \"opacity-50 pointer-events-none\" : \"\"\r\n                      }`}\r\n                      onClick={() => handleLoading(\"support\")}\r\n                    >\r\n                      <LifebuoyIcon className=\"h-5 w-5 mr-2 text-green-600\" />{\" \"}\r\n                      {loadingBtn.support ?  <i className=\"fa fa-spinner fa-spin\"></i> : \"Support\"}\r\n                    </Link>\r\n                    <button\r\n                      onClick={handleLogout}\r\n                      disabled={loadingBtn.logout}\r\n                      className={`w-full text-left flex items-center px-4 py-2 hover:bg-gray-100 ${\r\n                        loadingBtn.logout ? \"opacity-50 pointer-events-none\" : \"\"\r\n                      }`}\r\n                    >\r\n                      <ArrowRightOnRectangleIcon className=\"h-5 w-5 mr-2 text-gray-600\" />{\" \"}\r\n                      {loadingBtn.logout ? \"Logging out...\" : \"Log out\"}\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <div className=\"flex items-center justify-center space-x-4\">\r\n              <Link\r\n                href=\"/login\"\r\n                className={`px-4 py-2 border text-white rounded-md hover:bg-gray-100 ${\r\n                  loadingBtn.login ? \"opacity-50 pointer-events-none\" : \"\"\r\n                }`}\r\n                onClick={() => handleLoading(\"login\")}\r\n              >\r\n                {loadingBtn.login ?  <i className=\"fa fa-spinner fa-spin\"></i> : \"Login\"}\r\n              </Link>\r\n              <Link\r\n                href=\"/signup\"\r\n                className={`px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 ${\r\n                  loadingBtn.signup ? \"opacity-50 pointer-events-none\" : \"\"\r\n                }`}\r\n                onClick={() => handleLoading(\"signup\")}\r\n              >\r\n                {loadingBtn.signup ?  <i className=\"fa fa-spinner fa-spin\"></i> : \"Sign Up\"}\r\n              </Link>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 332, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 338, "column": 0}, "map": {"version":3,"sources":["file://D%3A/front_end/projects/next_js/smart-finshing/app/components/Footer/page.tsx"],"sourcesContent":["import Link from \"next/link\";\r\nimport Image from \"next/image\";\r\n\r\nexport default function Footer() {\r\nreturn (\r\n    <footer className=\"bg-gray-900 text-white p-8\">\r\n        <div className=\"container mx-auto px-6 grid grid-cols-1 md:grid-cols-6 gap-8\">\r\n            {/* Start Section */}\r\n            <div className=\"text-center md:col-span-2\">\r\n                <h3 className=\"text-lg font-bold mb-2\">Ready to get started?</h3>\r\n                <div className=\"space-y-4\">\r\n                    <Link href=\"/signup\" className=\"bg-green-500 text-white text-center py-2 px-4 rounded-lg hover:bg-green-600 transition duration-300\">\r\n                        Get Started\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Services Section */}\r\n            <div>\r\n                <h3 className=\"text-green-500 text-2xl mb-3\">Top Services</h3>\r\n                <ul className=\"text-gray-300 space-y-2\">\r\n                    <li>Handyman</li>\r\n                    <li>Plumbers</li>\r\n                    <li>Electricians</li>\r\n                    <li>House Cleaning</li>\r\n                </ul>\r\n            </div>\r\n\r\n            {/* HomeGuide Section */}\r\n            <div>\r\n                <h3 className=\"text-green-500 text-2xl mb-3\">LOGO</h3>\r\n                <ul className=\"text-gray-300 space-y-2\">\r\n                    <li>Home</li>\r\n                    <li>Log in</li>\r\n                    <li>About</li>\r\n                </ul>\r\n            </div>\r\n\r\n            {/* Help Section */}\r\n            <div>\r\n                <h3 className=\"text-green-500 text-2xl mb-3\">Help</h3>\r\n                <ul className=\"text-gray-300 space-y-2\">\r\n                    <li>FAQs</li>\r\n                </ul>\r\n            </div>\r\n\r\n            {/* Install App Section */}\r\n            <div>\r\n                <h3 className=\"text-green-500 text-2xl mb-3\">Install App</h3>\r\n                <div className=\"space-y-2\">\r\n                    <Link href=\"#\" className=\"block mb-2\">\r\n                        <Image src=\"/images/app_store.png\" alt=\"App Store\" width={150} height={45} />\r\n                    </Link>\r\n                    <Link href=\"#\" className=\"block mt-2\">\r\n                        <Image src=\"/images/googel_play.png\" alt=\"Google Play\" width={150} height={45} />\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div className=\"flex space-x-4\">\r\n                <Link href=\"/terms\" className=\"hover:text-white transition\">Terms & Conditions</Link>\r\n                <Link href=\"/privacy\" className=\"hover:text-white transition\">Privacy Policy</Link>\r\n            </div>\r\n        {/* Footer Bottom Section */}\r\n        <div className=\"border-t border-gray-700 mt-8 pt-4 flex flex-col md:flex-row justify-between items-center text-gray-400 text-sm\">\r\n            \r\n            <p>© address</p>\r\n\r\n            {/* Social Media Icons */}\r\n            <div className=\"flex space-x-4\">\r\n            <Link href=\"#\" className=\"hover:text-green-500 transition\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M22.213 5.656a8.4 8.4 0 0 1-2.402.658A4.2 4.2 0 0 0 21.649 4c-.82.488-1.719.83-2.655 1.015a4.182 4.182 0 0 0-7.126 3.814a11.87 11.87 0 0 1-8.621-4.37a4.17 4.17 0 0 0-.566 2.103c0 1.45.739 2.731 1.86 3.481a4.2 4.2 0 0 1-1.894-.523v.051a4.185 4.185 0 0 0 3.355 4.102a4.2 4.2 0 0 1-1.89.072A4.185 4.185 0 0 0 8.02 16.65a8.4 8.4 0 0 1-6.192 1.732a11.83 11.83 0 0 0 6.41 1.88c7.694 0 11.9-6.373 11.9-11.9q0-.271-.012-.541a8.5 8.5 0 0 0 2.086-2.164\"/></svg>\r\n            </Link>\r\n            <Link href=\"#\" className=\"hover:text-green-500 transition\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"-2 -2 24 24\"><g fill=\"currentColor\"><path d=\"M8.695 6.937v1.377H7.687v1.683h1.008V15h2.072V9.997h1.39s.131-.807.194-1.69h-1.576v-1.15c0-.173.226-.404.45-.404h1.128V5h-1.535C8.644 5 8.695 6.685 8.695 6.937\"/><path d=\"M4 2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm0-2h12a4 4 0 0 1 4 4v12a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4\"/></g></svg>   \r\n            </Link>\r\n            <Link href=\"#\" className=\"hover:text-green-500 transition\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4zm9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8A1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5a5 5 0 0 1-5 5a5 5 0 0 1-5-5a5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3\"/></svg>\r\n            </Link>\r\n            <Link href=\"#\" className=\"hover:text-green-500 transition\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2\"/></svg>\r\n            </Link>\r\n            </div>\r\n        </div>\r\n    </footer>\r\n);\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 761, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 767, "column": 0}, "map": {"version":3,"sources":["file://D%3A/front_end/projects/next_js/smart-finshing/app/viewprofile/%5Bid%5D/portfolio/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { useLoginClient } from \"../../../context/regester/login_context\";\r\nimport { useRouter, useParams } from \"next/navigation\";\r\nimport { useApi } from \"../../../context/ApiContext\";\r\nimport { useToken } from \"../../../context/token_context\";\r\nimport Navbar from \"../../../components/Nav/page\";\r\nimport Footer from \"../../../components/Footer/page\";\r\n\r\nexport default function AllPortfolioPage() {\r\n  const { token, saveData } = useLoginClient();\r\n  const router = useRouter();\r\n  const params = useParams();\r\n  const id = params?.id as string;\r\n  const { userData } = useToken();\r\n  const [portfolios, setPortfolios] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const { baseUrl } = useApi();\r\n\r\n  const userRole =\r\n    userData?.[\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"] || \"\";\r\n\r\n  const isOwnProfile =\r\n    userRole === \"Worker\" && id === String(saveData?.workerId);\r\n\r\n  useEffect(() => {\r\n    if (!token || !id) return;\r\n\r\n    const fetchPortfolios = async () => {\r\n      try {\r\n        let res;\r\n        if (isOwnProfile) {\r\n          // لو فاتح صفحته الشخصية\r\n          res = await fetch(`${baseUrl}/api/Portfolio`, {\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n              Accept: \"application/json\",\r\n            },\r\n          });\r\n        } else {\r\n          // لو بيشوف صفحة عامل تاني\r\n          res = await fetch(`${baseUrl}/api/Profile/workers/${id}`, {\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n              Accept: \"application/json\",\r\n            },\r\n          });\r\n        }\r\n\r\n        if (!res.ok) throw new Error(\"فشل في جلب البيانات\");\r\n\r\n        const data = await res.json();\r\n\r\n        setPortfolios(isOwnProfile ? data : data.portfolioItems || []);\r\n      } catch (err) {\r\n        console.error(\"❌ Error fetching portfolio:\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchPortfolios();\r\n  }, [token, id, isOwnProfile]);\r\n\r\n\r\n  const handleDelete = async (portfolioId: number) => {\r\n    if (!confirm(\"هل أنت متأكد أنك تريد حذف هذا البورتفوليو؟\")) return;\r\n\r\n    try {\r\n      const res = await fetch(`${baseUrl}/api/Portfolio/${portfolioId}`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          Accept: \"application/json\",\r\n        },\r\n      });\r\n\r\n      if (!res.ok) throw new Error(\"فشل في حذف البورتفوليو\");\r\n\r\n      setPortfolios((prev) => prev.filter((item) => item.id !== portfolioId));\r\n    } catch (err) {\r\n      console.error(\"❌ Error deleting portfolio:\", err);\r\n    }\r\n  };\r\n\r\n  const handleDeleteImage = async (portfolioId: number, imageId: number) => {\r\n  if (!confirm(\"هل تريد حذف هذه الصورة؟\")) return;\r\n\r\n  try {\r\n    const res = await fetch(`${baseUrl}/api/Portfolio/${portfolioId}/images/${imageId}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        Accept: \"application/json\",\r\n      },\r\n    });\r\n\r\n    if (!res.ok) {\r\n      const errorText = await res.text();\r\n      throw new Error(`فشل في حذف الصورة - رمز الحالة: ${res.status}, الرسالة: ${errorText}`);\r\n    }\r\n\r\n    console.log(\"تم حذف الصورة بنجاح\");\r\n\r\n    setPortfolios((prev) =>\r\n      prev.map((portfolio) =>\r\n        portfolio.id === portfolioId\r\n          ? {\r\n              ...portfolio,\r\n              imageUrls: portfolio.imageUrls.filter((img) => img.id !== imageId),\r\n            }\r\n          : portfolio\r\n      )\r\n    );\r\n  } catch (err: any) {\r\n    console.error(\"❌ Error deleting image:\", err.message || err);\r\n  }\r\n};\r\n\r\n\r\n  const handleEdit = (id: number) => {\r\n    router.push(`/edit-portfolio/${id}`);\r\n  };\r\n\r\n  const handleAddImages = (id: number) => {\r\n    router.push(`/add-portfolio-images/${id}`);\r\n  };\r\n\r\n  if (loading)\r\n  return (\r\n    <div className=\"flex flex-col justify-center items-center py-20 text-gray-600\">\r\n      <i className=\"fa fa-spinner fa-spin text-3xl mb-3 text-green-600\"></i>\r\n      <p className=\"text-lg font-medium\">Uploding Data ...</p>\r\n    </div>\r\n  );\r\n\r\n\r\n  return (<>\r\n    <Navbar  />\r\n    <div className=\"p-4 bg-white min-h-screen\">\r\n      <h1 className=\"text-2xl font-bold mb-6 text-center text-green-700\">\r\n        All Portfolios.\r\n      </h1>\r\n      {portfolios.length === 0 ? (\r\n        <p className=\"text-center text-gray-500\">لا يوجد عناصر لعرضها.</p>\r\n      ) : (\r\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\r\n          {portfolios.map((item) => (\r\n            <div key={item.id} className=\"border rounded-lg p-2 shadow relative\">\r\n              <div className=\"flex justify-between items-center mb-1\">\r\n                <h2 className=\"font-semibold text-sm text-green-800 truncate\">{item.name}</h2>\r\n                {isOwnProfile && (\r\n                  <div className=\"flex gap-2\">\r\n                    <button\r\n                      onClick={() => handleEdit(item.id)}\r\n                      className=\"text-blue-600 hover:text-blue-800 text-xs\"\r\n                      title=\"تعديل\"\r\n                    >\r\n                      ✏️\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleDelete(item.id)}\r\n                      className=\"text-red-500 hover:text-red-700 text-xs\"\r\n                      title=\"حذف\"\r\n                    >\r\n                      🗑️\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <p className=\"text-xs text-gray-600 mb-2 truncate\">{item.description}</p>\r\n              <div className=\"grid grid-cols-2 gap-1 mb-2\">\r\n                {item.imageUrls?.map((imgUrl, index) => (\r\n                  <div key={`${item.id}-img-${index}`} className=\"relative group\">\r\n                    <Image\r\n                      src={typeof imgUrl === \"string\" ? imgUrl : imgUrl.imageUrl}\r\n                      alt=\"portfolio image\"\r\n                      width={100}\r\n                      height={100}\r\n                      className=\"rounded object-cover w-full h-24\"\r\n                    />\r\n                    {isOwnProfile && (\r\n                      <button\r\n                        onClick={() => {\r\n                          handleDeleteImage(item.id, imgUrl.id);\r\n                        }}\r\n                        className=\"absolute top-1 right-1 bg-white text-red-600 rounded-full p-1 text-xs opacity-0 group-hover:opacity-100 transition\"\r\n                        title=\"حذف الصورة\"\r\n                      >\r\n                        🗑️\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {isOwnProfile && (\r\n                <button\r\n                  onClick={() => handleAddImages(item.id)}\r\n                  className=\"w-full bg-gray-100 hover:bg-gray-200 text-xs py-1 rounded text-gray-700\"\r\n                >\r\n                  ➕ إضافة صور\r\n                </button>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"mt-6 text-center\">\r\n        <button\r\n          onClick={() => router.back()}\r\n          className=\"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400 text-sm\"\r\n        >\r\n          Back\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <Footer />\r\n  </>);\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1079, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}