{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file://D%3A/front_end/projects/next_js/smart-finshing/app/components/Nav/page.tsx"],"sourcesContent":["\"use client\";\r\nimport Link from \"next/link\";\r\nimport { useToken } from \"../../context/token_context\";\r\nimport { useLoginClient } from \"../../context/regester/login_context\";\r\nimport {\r\n  UserCircleIcon,\r\n  ChevronDownIcon,\r\n  ArrowRightOnRectangleIcon,\r\n  LifebuoyIcon,\r\n} from \"@heroicons/react/24/outline\";\r\nimport { useState, useRef, useEffect } from \"react\";\r\n\r\nexport default function MinimalNavbar() {\r\n  const { userData, logOut } = useToken();\r\n  const { saveData } = useLoginClient();\r\n  const [dropOpen, setDropOpen] = useState(false);\r\n  const dropRef = useRef(null);\r\n\r\n  const role =\r\n    userData?.[\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"] || \"\";\r\n  const isCustomer = role.toLowerCase() === \"customer\";\r\n  const isWorker = role.toLowerCase() === \"worker\";\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (e) => {\r\n      if (dropRef.current && !dropRef.current.contains(e.target)) {\r\n        setDropOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  return (\r\n    <nav className=\"relative p-4 text-black shadow-md backdrop-blur-sm z-[9999]\">\r\n      <div className=\"container mx-auto flex justify-between items-center\">\r\n        {/* Logo */}\r\n        <Link href=\"/\" className=\"text-xl font-bold flex items-center\">\r\n          <span className=\"inline-block w-5 h-5 mr-2 rounded-full\" />\r\n          logo\r\n        </Link>\r\n\r\n        {/* Right section */}\r\n        <div\r\n          className={`lg:flex lg:items-center lg:w-auto w-full lg:block mt-4 lg:mt-0`}\r\n          ref={dropRef}\r\n        >\r\n          {userData ? (\r\n            <>\r\n              <div className=\"flex gap-4 font-medium px-2\">\r\n                <Link\r\n                  href=\"/requests\"\r\n                  className=\"hover:text-green-400 px-3 py-1 rounded\"\r\n                >\r\n                  Requests\r\n                </Link>\r\n                {!isWorker && (\r\n                  <Link\r\n                    href=\"/projects\"\r\n                    className=\"hover:text-green-400 px-3 py-1 rounded\"\r\n                  >\r\n                    Projects\r\n                  </Link>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"relative ml-4\">\r\n                <button\r\n                  onClick={() => setDropOpen(!dropOpen)}\r\n                  className=\"z-[9999] relative flex items-center bg-green-500 text-white px-4 py-2 rounded-md hover:bg-opacity-90 focus:outline-none\"\r\n                >\r\n                  <UserCircleIcon className=\"h-5 w-5\" />\r\n                  <span className=\"ml-2\">\r\n                    {saveData.displayName.split(\" \")[0]}\r\n                  </span>\r\n                  <ChevronDownIcon\r\n                    className={`h-4 w-4 ml-1 transform transition-transform ${\r\n                      dropOpen ? \"rotate-180\" : \"\"\r\n                    }`}\r\n                  />\r\n                </button>\r\n\r\n                {dropOpen && (\r\n                  <div className=\"fixed top-16 right-4 w-40 bg-white border border-gray-200 rounded-lg shadow-lg z-[99999] overflow-hidden text-black\">\r\n                    <Link\r\n                      href=\"/account\"\r\n                      className=\"flex items-center px-4 py-2 hover:bg-gray-100\"\r\n                    >\r\n                      <UserCircleIcon className=\"h-5 w-5 mr-2 text-gray-600\" />{\" \"}\r\n                      Account\r\n                    </Link>\r\n                    <Link\r\n                      href=\"/support\"\r\n                      className=\"flex items-center px-4 py-2 bg-green-50 hover:bg-green-100\"\r\n                    >\r\n                      <LifebuoyIcon className=\"h-5 w-5 mr-2 text-green-600\" />{\" \"}\r\n                      Support\r\n                    </Link>\r\n                    <button\r\n                      onClick={logOut}\r\n                      className=\"w-full text-left flex items-center px-4 py-2 hover:bg-gray-100\"\r\n                    >\r\n                      <ArrowRightOnRectangleIcon className=\"h-5 w-5 mr-2 text-gray-600\" />{\" \"}\r\n                      Log out\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <div className=\"flex items-center justify-center space-x-4\">\r\n              <Link\r\n                href=\"/login\"\r\n                className=\"px-4 py-2 border text-white rounded-md hover:bg-gray-100\"\r\n              >\r\n                Login\r\n              </Link>\r\n              <Link\r\n                href=\"/signup\"\r\n                className=\"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600\"\r\n              >\r\n                Sign Up\r\n              </Link>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAOA;AANA;AAAA;AAAA;AAAA;AAJA;;;;;;;AAYe,SAAS;IACtB,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,gIAAA,CAAA,WAAQ,AAAD;IACpC,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,4IAAA,CAAA,iBAAc,AAAD;IAClC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAE;IAEvB,MAAM,OACJ,UAAU,CAAC,+DAA+D,IAAI;IAChF,MAAM,aAAa,KAAK,WAAW,OAAO;IAC1C,MAAM,WAAW,KAAK,WAAW,OAAO;IAExC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,qBAAqB,CAAC;YAC1B,IAAI,QAAQ,OAAO,IAAI,CAAC,QAAQ,OAAO,CAAC,QAAQ,CAAC,EAAE,MAAM,GAAG;gBAC1D,YAAY;YACd;QACF;QACA,SAAS,gBAAgB,CAAC,aAAa;QACvC,OAAO,IAAM,SAAS,mBAAmB,CAAC,aAAa;IACzD,GAAG,EAAE;IAEL,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC,4JAAA,CAAA,UAAI;oBAAC,MAAK;oBAAI,WAAU;;sCACvB,8OAAC;4BAAK,WAAU;;;;;;wBAA2C;;;;;;;8BAK7D,8OAAC;oBACC,WAAW,CAAC,8DAA8D,CAAC;oBAC3E,KAAK;8BAEJ,yBACC;;0CACE,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,4JAAA,CAAA,UAAI;wCACH,MAAK;wCACL,WAAU;kDACX;;;;;;oCAGA,CAAC,0BACA,8OAAC,4JAAA,CAAA,UAAI;wCACH,MAAK;wCACL,WAAU;kDACX;;;;;;;;;;;;0CAML,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,SAAS,IAAM,YAAY,CAAC;wCAC5B,WAAU;;0DAEV,8OAAC,2NAAA,CAAA,iBAAc;gDAAC,WAAU;;;;;;0DAC1B,8OAAC;gDAAK,WAAU;0DACb,SAAS,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;;;;;;0DAErC,8OAAC,6NAAA,CAAA,kBAAe;gDACd,WAAW,CAAC,4CAA4C,EACtD,WAAW,eAAe,IAC1B;;;;;;;;;;;;oCAIL,0BACC,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,4JAAA,CAAA,UAAI;gDACH,MAAK;gDACL,WAAU;;kEAEV,8OAAC,2NAAA,CAAA,iBAAc;wDAAC,WAAU;;;;;;oDAAgC;oDAAI;;;;;;;0DAGhE,8OAAC,4JAAA,CAAA,UAAI;gDACH,MAAK;gDACL,WAAU;;kEAEV,8OAAC,uNAAA,CAAA,eAAY;wDAAC,WAAU;;;;;;oDAAiC;oDAAI;;;;;;;0DAG/D,8OAAC;gDACC,SAAS;gDACT,WAAU;;kEAEV,8OAAC,iPAAA,CAAA,4BAAyB;wDAAC,WAAU;;;;;;oDAAgC;oDAAI;;;;;;;;;;;;;;;;;;;;qDAQnF,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,4JAAA,CAAA,UAAI;gCACH,MAAK;gCACL,WAAU;0CACX;;;;;;0CAGD,8OAAC,4JAAA,CAAA,UAAI;gCACH,MAAK;gCACL,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASf"}},
    {"offset": {"line": 274, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 280, "column": 0}, "map": {"version":3,"sources":["file://D%3A/front_end/projects/next_js/smart-finshing/app/RequestDetails/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useParams } from \"next/navigation\";\r\nimport { useApi } from \"../../context/ApiContext\";\r\nimport { useToken } from \"../../context/token_context\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Navbar from \"../../components/Nav/page\";\r\n\r\nexport default function RequestDetailsPage() {\r\n  const params = useParams();\r\n  const id =\r\n    typeof params.id === \"string\"\r\n      ? params.id\r\n      : Array.isArray(params.id)\r\n      ? params.id[0]\r\n      : \"\";\r\n\r\n  const { baseUrl } = useApi();\r\n  const { token, userData } = useToken();\r\n\r\n  const [request, setRequest] = useState<any>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const role =\r\n    userData?.[\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"] || \"\";\r\n  const isCustomer = role.toLowerCase() === \"customer\";\r\n  const isWorker = role.toLowerCase() === \"worker\";\r\n\r\n  useEffect(() => {\r\n    if (!id || !token || (!isCustomer && !isWorker)) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const fetchDetails = async () => {\r\n      try {\r\n        const endpoint = isCustomer\r\n          ? `/api/Requests/customer-requests/${id}`\r\n          : `/api/Requests/received-requests/${id}`;\r\n\r\n        const url = `${baseUrl}${endpoint}`;\r\n\r\n        const res = await fetch(url, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n\r\n        if (!res.ok) {\r\n          const errText = await res.text();\r\n          throw new Error(`Failed to fetch request: ${res.status} - ${errText}`);\r\n        }\r\n\r\n        const data = await res.json();\r\n        setRequest(data);\r\n      } catch (err: any) {\r\n        setError(err.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchDetails();\r\n  }, [id, token, baseUrl, isCustomer, isWorker]);\r\n\r\n  if (loading)\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-20 text-center\">\r\n        <div className=\"animate-spin rounded-full h-16 w-16 border-4 border-t-green-600 border-gray-300 mb-4\"></div>\r\n        <h3 className=\"text-lg font-semibold text-gray-700\">جارٍ تحميل البيانات...</h3>\r\n        <p className=\"text-sm text-gray-400 mt-1\">يرجى الانتظار قليلًا</p>\r\n      </div>\r\n    );\r\n\r\n\r\n  if (error) return <p className=\"text-red-600\">Error: {error}</p>;\r\n  if (!request) return (\r\n  <div className=\"flex flex-col justify-center items-center py-20 text-center\">\r\n    <div className=\"text-6xl text-gray-400 mb-4\">\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-16 h-16\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.75 9.75h.008v.008H9.75V9.75zm4.5 0h.008v.008h-.008V9.75zm-.75 5.25h-3m6.75 3a9 9 0 11-13.5-7.794M12 3v1.5M4.219 4.219l1.061 1.061M3 12h1.5M4.219 19.781l1.061-1.061M12 21v-1.5M19.781 19.781l-1.061-1.061M21 12h-1.5M19.781 4.219l-1.061 1.061\" />\r\n      </svg>\r\n    </div>\r\n    <h3 className=\"text-xl font-semibold text-gray-600\">No request details found</h3>\r\n    <p className=\"text-gray-400 mt-2 max-w-md\">\r\n      The request you're looking for might have been removed or doesn't exist. Please check the ID or try again later.\r\n    </p>\r\n  </div>\r\n);\r\n\r\n\r\n  return (<>\r\n    <Navbar/>\r\n    <div className=\"p-4\">\r\n      <h2 className=\"text-xl font-bold mb-4\">Request Details</h2>\r\n      <table className=\"w-full border border-gray-300 text-sm\">\r\n        <tbody>\r\n          <Row label=\"Customer Name\" value={request.customerName} />\r\n          <Row label=\"Worker Name\" value={request.workerName} />\r\n          <Row label=\"Service\" value={request.serviceName} />\r\n          <Row label=\"City\" value={request.customerCity} />\r\n          <Row label=\"Address\" value={request.customerAddress} />\r\n          <Row label=\"Apartment Type\" value={request.apartmentType} />\r\n          <Row label=\"Size\" value={request.apartmentSize} />\r\n          <Row label=\"Style\" value={request.preferredStyle} />\r\n          <Row label=\"Material Quality\" value={request.materialQuality} />\r\n          <Row label=\"Project Details\" value={request.projectDetails} />\r\n          <Row label=\"Budget\" value={`From ${request.minBudget} to ${request.maxBudget}`} />\r\n          <Row label=\"Worker Offered Price\" value={request.workerOfferedPrice} />\r\n          <Row label=\"Final Agreed Price\" value={request.finalAgreedPrice} />\r\n          <Row\r\n            label=\"Request Date\"\r\n            value={new Date(request.requestDate).toLocaleDateString()}\r\n          />\r\n          <Row label=\"Status\" value={request.status} />\r\n        </tbody>\r\n      </table>\r\n\r\n      <div className=\"mt-6\">\r\n        <h3 className=\"font-semibold mb-2\">Project Images</h3>\r\n        <div className=\"grid grid-cols-2 gap-2\">\r\n          {request.projectImageUrls?.length > 0 ? (\r\n            request.projectImageUrls.map((url: string, index: number) => (\r\n              <img\r\n                key={index}\r\n                src={url}\r\n                alt={`project image ${index}`}\r\n                className=\"w-full h-auto rounded border\"\r\n              />\r\n            ))\r\n          ) : (\r\n            <p className=\"text-gray-500\">No images available</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </>);\r\n}\r\n\r\nfunction Row({ label, value }: { label: string; value: string | number }) {\r\n  return (\r\n    <tr className=\"border-t\">\r\n      <td className=\"px-3 py-2 font-medium w-1/3 bg-gray-100\">{label}</td>\r\n      <td className=\"px-3 py-2\">{value}</td>\r\n    </tr>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 666, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}