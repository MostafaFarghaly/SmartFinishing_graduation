{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file://D%3A/front_end/projects/next_js/smart-finshing/app/context/regester/signupclient_context.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { signIn } from \"next-auth/react\"; // ← استخدمنا NextAuth\r\n\r\nconst SignUpClientContext = createContext();\r\n\r\nexport function SignUpClientProvider({ children }) {\r\n  const [error, setError] = useState(\"\");\r\n  const [cities, setCities] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [user, setUser] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    confirmPassword: \"\",\r\n    phoneNumber: \"\",\r\n    address: \"\",\r\n    buildingNumber: \"\",\r\n    cityId: \"\",\r\n    age: \"\",\r\n    profilePicture: null,\r\n  });\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"https://projectapi-ekhpcndsdgbahqhm.canadacentral-01.azurewebsites.net/api/Cities\")\r\n      .then((res) => setCities(res.data))\r\n      .catch((err) => console.error(err));\r\n  }, []);\r\n\r\n  function getUserData(e) {\r\n    const { name, value, files } = e.target;\r\n    if (name === \"profilePicture\") {\r\n      setUser((prev) => ({ ...prev, profilePicture: files[0] }));\r\n    } else {\r\n      setUser((prev) => ({ ...prev, [name]: value }));\r\n    }\r\n  }\r\n\r\n  async function sendData() {\r\n    const formData = new FormData();\r\n    formData.append(\"Name\", user.name);\r\n    formData.append(\"Email\", user.email);\r\n    formData.append(\"Password\", user.password);\r\n    formData.append(\"ConfirmPassword\", user.confirmPassword);\r\n    formData.append(\"PhoneNumber\", user.phoneNumber);\r\n    formData.append(\"Address\", user.address);\r\n    formData.append(\"BuildingNumber\", user.buildingNumber);\r\n    formData.append(\"CityId\", user.cityId);\r\n    if (user.age) formData.append(\"Age\", user.age);\r\n    if (user.profilePicture) formData.append(\"ProfilePicture\", user.profilePicture);\r\n\r\n    const { data } = await axios.post(\r\n      \"https://projectapi-ekhpcndsdgbahqhm.canadacentral-01.azurewebsites.net/api/account/register/customer\",\r\n      formData,\r\n      {\r\n        headers: { \"Content-Type\": \"multipart/form-data\" },\r\n        validateStatus: () => true,\r\n      }\r\n    );\r\n\r\n    if (!data.errors) {\r\n      setIsLoading(false);\r\n      // ← بعد النجاح، نسجل دخول مباشرة باستخدام credentials من NextAuth\r\n      await signIn(\"credentials\", {\r\n        redirect: true,\r\n        email: user.email,\r\n        password: user.password,\r\n        callbackUrl: \"/\", // ← أو الصفحة اللي تحب توديه ليها بعد التسجيل\r\n      });\r\n    } else {\r\n      setIsLoading(false);\r\n      setError(data.errors);\r\n    }\r\n  }\r\n\r\n  function submitForm(e) {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n    sendData();\r\n  }\r\n\r\n  return (\r\n    <SignUpClientContext.Provider\r\n      value={{\r\n        error,\r\n        cities,\r\n        isLoading,\r\n        user,\r\n        getUserData,\r\n        submitForm,\r\n      }}\r\n    >\r\n      {children}\r\n    </SignUpClientContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useSignUpClient() {\r\n  const context = useContext(SignUpClientContext);\r\n  if (!context) {\r\n    throw new Error(\"useSignUpClient must be used within a SignUpClientProvider\");\r\n  }\r\n  return context;\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AAEA,qPAA0C,sBAAsB;AADhE;AAFA;;;;;AAKA,MAAM,oCAAsB,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD;AAEjC,SAAS,qBAAqB,EAAE,QAAQ,EAAE;IAC/C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;QAC/B,MAAM;QACN,OAAO;QACP,UAAU;QACV,iBAAiB;QACjB,aAAa;QACb,SAAS;QACT,gBAAgB;QAChB,QAAQ;QACR,KAAK;QACL,gBAAgB;IAClB;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,qIAAA,CAAA,UAAK,CACF,GAAG,CAAC,qFACJ,IAAI,CAAC,CAAC,MAAQ,UAAU,IAAI,IAAI,GAChC,KAAK,CAAC,CAAC,MAAQ,QAAQ,KAAK,CAAC;IAClC,GAAG,EAAE;IAEL,SAAS,YAAY,CAAC;QACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QACvC,IAAI,SAAS,kBAAkB;YAC7B,QAAQ,CAAC,OAAS,CAAC;oBAAE,GAAG,IAAI;oBAAE,gBAAgB,KAAK,CAAC,EAAE;gBAAC,CAAC;QAC1D,OAAO;YACL,QAAQ,CAAC,OAAS,CAAC;oBAAE,GAAG,IAAI;oBAAE,CAAC,KAAK,EAAE;gBAAM,CAAC;QAC/C;IACF;IAEA,eAAe;QACb,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,QAAQ,KAAK,IAAI;QACjC,SAAS,MAAM,CAAC,SAAS,KAAK,KAAK;QACnC,SAAS,MAAM,CAAC,YAAY,KAAK,QAAQ;QACzC,SAAS,MAAM,CAAC,mBAAmB,KAAK,eAAe;QACvD,SAAS,MAAM,CAAC,eAAe,KAAK,WAAW;QAC/C,SAAS,MAAM,CAAC,WAAW,KAAK,OAAO;QACvC,SAAS,MAAM,CAAC,kBAAkB,KAAK,cAAc;QACrD,SAAS,MAAM,CAAC,UAAU,KAAK,MAAM;QACrC,IAAI,KAAK,GAAG,EAAE,SAAS,MAAM,CAAC,OAAO,KAAK,GAAG;QAC7C,IAAI,KAAK,cAAc,EAAE,SAAS,MAAM,CAAC,kBAAkB,KAAK,cAAc;QAE9E,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,qIAAA,CAAA,UAAK,CAAC,IAAI,CAC/B,wGACA,UACA;YACE,SAAS;gBAAE,gBAAgB;YAAsB;YACjD,gBAAgB,IAAM;QACxB;QAGF,IAAI,CAAC,KAAK,MAAM,EAAE;YAChB,aAAa;YACb,kEAAkE;YAClE,MAAM,CAAA,GAAA,8IAAA,CAAA,SAAM,AAAD,EAAE,eAAe;gBAC1B,UAAU;gBACV,OAAO,KAAK,KAAK;gBACjB,UAAU,KAAK,QAAQ;gBACvB,aAAa;YACf;QACF,OAAO;YACL,aAAa;YACb,SAAS,KAAK,MAAM;QACtB;IACF;IAEA,SAAS,WAAW,CAAC;QACnB,EAAE,cAAc;QAChB,aAAa;QACb;IACF;IAEA,qBACE,8OAAC,oBAAoB,QAAQ;QAC3B,OAAO;YACL;YACA;YACA;YACA;YACA;YACA;QACF;kBAEC;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 218, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 224, "column": 0}, "map": {"version":3,"sources":["file://D%3A/front_end/projects/next_js/smart-finshing/app/%28auth%29/signUpClient/page.tsx"],"sourcesContent":["\"use client\";\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\nimport Image from \"next/image\";\r\nimport Link from \"next/link\";\r\nimport { useState } from \"react\";\r\nimport { useSignUpClient } from \"../../context/regester/signupclient_context\";\r\n\r\nexport default function SignUpClient() {\r\n    const { error, cities, isLoading, user, getUserData, submitForm } = useSignUpClient();\r\n    const [step, setStep] = useState(1);\r\n\r\n    const nextStep = (e) => {\r\n        e.preventDefault();\r\n        setStep(2);\r\n    };\r\n\r\n    const prevStep = (e) => {\r\n        e.preventDefault();\r\n        setStep(1);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex min-h-screen items-center justify-center bg-gray-100\">\r\n        <div className=\"flex w-full max-w-4xl bg-white shadow-lg rounded-2xl\">\r\n            {/* Left Section */}\r\n            <div className=\"w-10/12 p-8\">\r\n            <h2 className=\"text-3xl font-bold my-text-green mb-1\">Sign Up Client</h2>\r\n            <p className=\"text-gray-600 mb-1\">\r\n                Let’s get you all set up so you can access your personal account\r\n            </p>\r\n\r\n            {error && (\r\n                <div className=\"text-red-600 text-sm space-y-1 mb-3\">\r\n                {Array.isArray(error) ? error.map((err, idx) => <p key={idx}>{err}</p>) : <p>{error}</p>}\r\n                </div>\r\n            )}\r\n\r\n            <form className=\"space-y-4\" onSubmit={step === 2 ? submitForm : nextStep}>\r\n                {/* Step 1 */}\r\n                {step === 1 && (\r\n                <>\r\n                    <input\r\n                    name=\"name\"\r\n                    value={user.name}\r\n                    onChange={getUserData}\r\n                    placeholder=\"Full Name\"\r\n                    className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500\"\r\n                    required\r\n                    />\r\n                    <input\r\n                    name=\"email\"\r\n                    type=\"email\"\r\n                    value={user.email}\r\n                    onChange={getUserData}\r\n                    placeholder=\"Email\"\r\n                    className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500\"\r\n                    required\r\n                    />\r\n                    <input\r\n                    name=\"password\"\r\n                    type=\"password\"\r\n                    value={user.password}\r\n                    onChange={getUserData}\r\n                    placeholder=\"Password\"\r\n                    className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500\"\r\n                    required\r\n                    />\r\n                    <input\r\n                    name=\"confirmPassword\"\r\n                    type=\"password\"\r\n                    value={user.confirmPassword}\r\n                    onChange={getUserData}\r\n                    placeholder=\"Confirm Password\"\r\n                    className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500\"\r\n                    required\r\n                    />\r\n                    <input\r\n                    name=\"phoneNumber\"\r\n                    value={user.phoneNumber}\r\n                    onChange={getUserData}\r\n                    placeholder=\"Phone Number\"\r\n                    className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500\"\r\n                    required\r\n                    />\r\n\r\n                    <button\r\n                    type=\"submit\"\r\n                    className=\"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors\"\r\n                    >\r\n                    Next\r\n                    </button>\r\n                </>\r\n                )}\r\n\r\n                {/* Step 2 */}\r\n                {step === 2 && (\r\n                <>\r\n                    <input\r\n                    name=\"address\"\r\n                    value={user.address}\r\n                    onChange={getUserData}\r\n                    placeholder=\"Address\"\r\n                    className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500\"\r\n                    required\r\n                    />\r\n                    <input\r\n                    name=\"buildingNumber\"\r\n                    value={user.buildingNumber}\r\n                    onChange={getUserData}\r\n                    placeholder=\"Building Number\"\r\n                    className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500\"\r\n                    required\r\n                    />\r\n                    <select\r\n                    name=\"cityId\"\r\n                    value={user.cityId}\r\n                    onChange={getUserData}\r\n                    className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500\"\r\n                    required\r\n                    >\r\n                    <option value=\"\">Select a city</option>\r\n                    {cities.map((city) => (\r\n                        <option key={city.id} value={city.id}>\r\n                        {city.name}\r\n                        </option>\r\n                    ))}\r\n                    </select>\r\n                    <input\r\n                    name=\"age\"\r\n                    type=\"number\"\r\n                    value={user.age}\r\n                    onChange={getUserData}\r\n                    placeholder=\"Age\"\r\n                    className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500\"\r\n                    />\r\n                    <input\r\n                    name=\"profilePicture\"\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    onChange={getUserData}\r\n                    className=\"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500\"\r\n                    />\r\n\r\n                    <div className=\"flex justify-between gap-2\">\r\n                    <button\r\n                        onClick={prevStep}\r\n                        className=\"w-1/2 bg-gray-300 text-gray-700 py-1 rounded-lg hover:bg-gray-400 transition-colors\"\r\n                    >\r\n                        Previous\r\n                    </button>\r\n                    <button\r\n                        type=\"submit\"\r\n                        className=\"w-1/2 bg-green-600 text-white py-1 rounded-lg hover:bg-green-700 transition-colors\"\r\n                    >\r\n                        {isLoading ? <i className=\"fa fa-spinner fa-spin\"></i> : \"Create Account\"}\r\n                    </button>\r\n                    </div>\r\n                </>\r\n                )}\r\n            </form>\r\n\r\n            <p className=\"mt-3 text-sm text-center text-gray-500\">\r\n                Already have an account?{\" \"}\r\n                <Link href=\"/login\" className=\"text-green-500 hover:underline\">\r\n                Sign in\r\n                </Link>\r\n            </p>\r\n            </div>\r\n\r\n            {/* Right Section */}\r\n            <div className=\"w-50 bg-green-50 flex items-center justify-center p-6\">\r\n            <Image src=\"/images/signup.png\" alt=\"Sign Up\" width={550} height={550} className=\"mx-auto\" />\r\n            </div>\r\n        </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 549, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}